# Example values for AWS deployment with External Secrets Operator
# Usage: helm install github-rate-checker ./helm/github-rate-limit-checker -f values-aws.yaml

image:
  repository: ghcr.io/your-org/github-rate-limit-checker
  tag: "1.0.0"

replicaCount: 1

serviceAccount:
  create: true
  annotations:
    # For AWS IAM Roles for Service Accounts (IRSA)
    eks.amazonaws.com/role-arn: arn:aws:iam::123456789012:role/github-rate-checker-role

github:
  authMethod: "app"
  app:
    appId: "1425448"
    installationId: "71947549"
    privateKey:
      externalSecret:
        enabled: true
        name: github-app-external-secret
        secretStoreName: aws-secretsmanager
        secretStoreKind: SecretStore
        targetSecretName: github-app-credentials
        refreshInterval: 1h
        remoteSecrets:
          aws:
            region: us-east-1
            secretName: prod/github-app-credentials
            secretKey: private-key

config:
  prometheusEnabled: true
  prometheusPort: 9090
  watch: false
  interval: 60

serviceMonitor:
  enabled: true
  namespace: monitoring
  additionalLabels:
    prometheus: kube-prometheus
  interval: 30s
  scrapeTimeout: 10s

resources:
  limits:
    cpu: 200m
    memory: 128Mi
  requests:
    cpu: 50m
    memory: 64Mi

podDisruptionBudget:
  enabled: true
  minAvailable: 0

networkPolicy:
  enabled: true

nodeSelector:
  kubernetes.io/os: linux

tolerations: []

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
    - weight: 100
      podAffinityTerm:
        labelSelector:
          matchExpressions:
          - key: app.kubernetes.io/name
            operator: In
            values:
            - github-rate-limit-checker
        topologyKey: kubernetes.io/hostname
